<!DOCTYPE html>
<html>
  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title> EDA | CS 109a Final Project</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link rel="stylesheet" href="/lora/css/main.css">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#2ecc71">
<link rel="canonical" href="/lora/eda/">
<link rel="alternate" type="application/rss+xml" title="CS 109a Final Project" href="/lora/feed.xml" />
<script src=”//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js”></script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
  </head>
  <body class="page">
    <main class="container">
        <header class="site-header">
  <div class="container txt-center">
    <nav class="navbar">
      <ul>
        <li><a href="/lora/">Background</a></li>
        <li class="divider">&bull;</li>
        <li><a href="/lora/scrape">Data Scraping</a></li>
        <li class="divider">&bull;</li>
        <li><a href="/lora/eda">EDA</a></li>
        <li class="divider">&bull;</li>
        <li><a href="/lora/models">Models</a></li>
        <li class="divider">&bull;</li>
        <li><a href="/lora/conclusions">Conclusions</a></li>
      </ul>
    </nav>
    <hr class="hr">
  </div>
</header>
        <section class="main-content">
          <article class="post">
  <header class="post-header">
    <h1 class="post-title">EDA</h1>
    <p class="post-meta"></p>
  </header>
  <div class="post-content">
    <h2 class="no_toc" id="contents">Contents</h2>
<ul id="markdown-toc">
  <li><a href="#crime-analysis" id="markdown-toc-crime-analysis">2 Crime Analysis</a>    <ul>
      <li><a href="#time-series-consideration-changes-in-crime-over-year" id="markdown-toc-time-series-consideration-changes-in-crime-over-year">2.1 Time-Series Consideration: Changes in Crime over Year</a></li>
      <li><a href="#dependent-variable-selection" id="markdown-toc-dependent-variable-selection">2.2 Dependent Variable Selection:</a>        <ul>
          <li><a href="#eda-with-respect-to-age" id="markdown-toc-eda-with-respect-to-age">2.2.1 EDA with respect to Age</a></li>
          <li><a href="#eda-with-respect-to-income" id="markdown-toc-eda-with-respect-to-income">2.2.2 EDA with respect to Income</a></li>
          <li><a href="#eda-with-respect-to-the-poverty-level-in-each-msa" id="markdown-toc-eda-with-respect-to-the-poverty-level-in-each-msa">2.2.3 EDA with respect to the poverty level in each MSA</a></li>
          <li><a href="#eda-with-respect-to-sex" id="markdown-toc-eda-with-respect-to-sex">2.2.4 EDA with respect to Sex</a></li>
          <li><a href="#eda-with-respect-to-race" id="markdown-toc-eda-with-respect-to-race">2.2.5 EDA with respect to Race</a></li>
          <li><a href="#eda-with-respect-to-ethnicity" id="markdown-toc-eda-with-respect-to-ethnicity">2.2.6 EDA with respect to Ethnicity</a></li>
          <li><a href="#eda-with-respect-to-educational-attainment" id="markdown-toc-eda-with-respect-to-educational-attainment">2.2.7 EDA with respect to educational attainment</a></li>
          <li><a href="#eda-with-respect-to-marital-status" id="markdown-toc-eda-with-respect-to-marital-status">2.2.8 EDA with respect to Marital status</a></li>
          <li><a href="#eda-with-respect-to-us-citizen-population-" id="markdown-toc-eda-with-respect-to-us-citizen-population-">2.2.9 EDA with respect to U.S. Citizen Population %</a></li>
          <li><a href="#eda-with-respect-to-foreign-born-population-" id="markdown-toc-eda-with-respect-to-foreign-born-population-">2.2.10 EDA with respect to Foreign Born Population %</a></li>
        </ul>
      </li>
      <li><a href="#examine-correlation-matrix-of-these-variables" id="markdown-toc-examine-correlation-matrix-of-these-variables">2.3 Examine Correlation Matrix of these Variables</a></li>
      <li><a href="#additional-questions" id="markdown-toc-additional-questions">2.4 Additional Questions</a></li>
    </ul>
  </li>
</ul>
<p><br /><br /></p>
<h2 id="crime-analysis">2 Crime Analysis</h2>
<h3 id="time-series-consideration-changes-in-crime-over-year">2.1 Time-Series Consideration: Changes in Crime over Year</h3>
<p>For a simple view on a times series basis of the change in total murder counts on a per annum basis, we decided to create a scatter plot as shown in Figure 1. However, time series or the year variable did not seem to have a clear correlation with crime count.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fbi_data_path</span> <span class="o">=</span> <span class="s">&#39;Crime/data/fbi_data/&#39;</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">census_data_path</span> <span class="o">=</span> <span class="s">&#39;Crime/data/census/&#39;</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fbi_filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">fbi_data_path</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">fbi_data_path</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">csv_filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="s">&#39;csvs/&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;csvs/&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">df_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;csvs/&#39;</span><span class="p">,</span> <span class="n">csv_filepaths</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span> <span class="o">+</span> <span class="n">csv_filepaths</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="o">-</span><span class="mi">4</span><span class="p">]]</span>
<span class="n">df_total</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">csv_filepaths</span><span class="p">)):</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="s">&#39;csvs/&#39;</span><span class="p">,</span> <span class="n">csv_filepaths</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span> <span class="o">+</span> <span class="n">csv_filepaths</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="o">-</span><span class="mi">4</span><span class="p">]]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
    <span class="n">df_total</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_total</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">2017</span><span class="p">)),</span> <span class="n">df_total</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Years&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Murder counts from 2006 - 2016&#39;</span><span class="p">)</span></code></pre></div>
<p><strong>Figure 1</strong></p>
<p><img src="EDA_files/EDA_8_1.png" alt="png" /></p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">census_folder_fps</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">census_data_path</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">census_data_path</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">census_filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">census_folder_fps</span> <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="s">&#39;census.csv&#39;</span><span class="p">]</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">strip_dashes</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">split</span><span class="p">())</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">merge_df_msa</span><span class="p">(</span><span class="n">fbi_df</span><span class="p">,</span> <span class="n">census_df</span><span class="p">):</span>
    <span class="n">census_mask</span> <span class="o">=</span> <span class="n">census_df</span><span class="p">[</span><span class="s">&#39;Geography&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
    <span class="n">fbi_mask</span> <span class="o">=</span> <span class="n">fbi_df</span><span class="p">[</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
    <span class="n">df_c</span> <span class="o">=</span> <span class="n">census_df</span><span class="p">[</span><span class="o">~</span><span class="n">census_mask</span><span class="p">]</span>
    <span class="n">df_f</span> <span class="o">=</span> <span class="n">fbi_df</span><span class="p">[</span><span class="o">~</span><span class="n">fbi_mask</span><span class="p">]</span>
    <span class="n">geos</span> <span class="o">=</span> <span class="n">df_c</span><span class="p">[</span><span class="s">&#39;Geography&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;Metro Area&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="n">geos</span> <span class="o">=</span> <span class="n">geos</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">strip_dashes</span><span class="p">)</span>
    <span class="n">df_c</span><span class="p">[</span><span class="s">&#39;Geography&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geos</span>
    <span class="n">fbi_geos</span> <span class="o">=</span> <span class="n">df_f</span><span class="p">[</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">strip_dashes</span><span class="p">)</span>
    <span class="n">df_f</span><span class="p">[</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fbi_geos</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_f</span><span class="p">,</span> <span class="n">df_c</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;Metropolitan_Statistical_Area&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;Geography&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;inner&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">&#39;Geography&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">df_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">df_fbi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;csvs/&#39;</span><span class="p">,</span> <span class="n">csv_filepaths</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">df_census</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">census_data_path</span><span class="p">,</span> <span class="n">census_filepaths</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;Id&#39;</span><span class="p">,</span> <span class="s">&#39;Id2&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_census</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Native&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">and</span> <span class="s">&#39;Margin of Error&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
    <span class="n">foreign</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df_census</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;born outside&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">non_native</span> <span class="o">=</span> <span class="n">df_census</span><span class="p">[</span><span class="n">foreign</span><span class="p">]</span>
    <span class="n">df_census</span> <span class="o">=</span> <span class="n">df_census</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="n">df_census</span><span class="p">[</span><span class="s">&#39;non_native&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">non_native</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">merge_df_msa</span><span class="p">(</span><span class="n">df_fbi</span><span class="p">,</span> <span class="n">df_census</span><span class="p">)</span>
    <span class="c"># Compute murders per 100,000 people</span>
    <span class="n">population</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Total population&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">per_100</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">population</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">/</span><span class="mf">100000.0</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">per_100</span>
    <span class="n">df_dict</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span></code></pre></div>
<h3 id="dependent-variable-selection">2.2 Dependent Variable Selection:</h3>
<p>For the count of crime, we decided to use the sum count of murder and nonnegligent manslaughter from the FBI data. However, in order to obtain a more comparable metric, the ‘Murder_and_nonnegligent_manslaughter’ count was transformed on a per 100,000 population–resulting in the ‘murder_per_100000’ response variable. We then stored these merged yearly dataframes into a dictionary called ‘df_dict’ with keys representing the year (i.e. data from 2014 has a key of 14 and the value as the merged dataframe from 2014).</p>
<h4 id="eda-with-respect-to-age">2.2.1 EDA with respect to Age</h4>
<p>Surprisingly, median age does not seem to have a clear correlation with crime count. In Figure 2, you will be able to see that median ages are normally distributed on a per MSA basis with not clear correlation with crime. However, since the American Public Health Association claim that age demographic is one of the significant predictors for crime, we decided to incorporate similar age proxies such as ‘ya_percentage’. This ‘ya_percentage’ is created by taking the percentage demographic that are of age 18 to 24 years.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Median age&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">median_of_medians</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">age</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs. Median age</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="n">age</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median_of_medians</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median of medians&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Median Age in MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Median Age per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 people vs. Median age</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="n">age</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median_of_medians</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median of medians&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Median Age in MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Median Age per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 2</strong>
<img src="EDA_files/EDA_15_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-income">2.2.2 EDA with respect to Income</h4>
<p>There are no clear insights regarding the median income, either. We expected median income to have a negative correlation with crime count, as such Figure 3 shows a slight negative correlation between median income and murder rate. However, in the Census data, income is further broken down into 8 buckets for each MSA area: ‘$1 to $9,999 or loss’, ‘$10,000 to $14,999’, ‘$15,000 to $24,999’, ‘$25,000 to $34,999’, ‘$35,000 to $49,999’, ‘$50,000 to $64,999’, ‘$65,000 to $74,999’, and ‘$75,000 or more’. Although certain MSA’s are missing those income breakdown, we decided to impute those missing values by taking the overall average on each column. We will compare the performance of a basic model without the income breakdown to the more convoluted one trained with the breakdowns to examine if any significant difference exists.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">afig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">income</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Median income&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">income_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">income</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">income_series</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs Median income</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">income_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median income&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">14000</span><span class="p">,</span> <span class="mi">40000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Median Income in MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Median Income per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 people vs Median income</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">income_series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median of medians&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">14000</span><span class="p">,</span> <span class="mi">40000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Median Income in MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Median Income per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 3</strong>
<img src="EDA_files/EDA_17_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-the-poverty-level-in-each-msa">2.2.3 EDA with respect to the poverty level in each MSA</h4>
<p>Figure 4 shows a fairly clear positive correlation between people living below the poverty line and the murder rate (murders per 100,000), which is as expected. This also poses new questions such as why certain MSA areas have low murder rates but high level of poverty. This could give interesting insights into the causes of murder, as well as improvements we could make to our model using interaction variables with Polynomial Features. We are also considering including a boolean variable of signifying the MSA area is considered a low-income geographic area using the legal definition of 20% or more people living in poverty, but we also are aware of the issues of multicollinearity as this would be imputed from the numeric value of poverty.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">poverty_level</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;poverty level&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">poverty_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">poverty_level</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">poverty_series</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs Percentage of population living below poverty line</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">poverty_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median poverty percentage&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of People living in Poverty per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Poverty Level per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 vs Percentage of population living below poverty line</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">poverty_series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median poverty percentage&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of People living in Poverty per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Poverty Level per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 4</strong></p>
<p><img src="EDA_files/EDA_20_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-sex">2.2.4 EDA with respect to Sex</h4>
<p>We did not expect gender to have any strong correlation to murder. Figure 5 shows that gender division per MSA hovers close to 50% with a normal distribution. However, sex might be an interesting variable especially for those MSA’s with a skewed gender balance.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">male</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Male&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">male_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">male</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">male_series</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs. Percentage of population that is male</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">male_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that is male&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">46</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Population that is Male&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Male Population Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 vs Percentage of population that is male</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">male_series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that is male&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">46</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Population that is Male&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Male Population Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 5</strong></p>
<p><img src="EDA_files/EDA_23_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-race">2.2.5 EDA with respect to Race</h4>
<p>Figure 6 shows interesting but possibly misleading results. It is clear there is a positive correlation between the Black/African American percentage of the population and crime. By extension, there is a negative correlation between the white percentage of the population. However, correlation does not imply causation. Interactive variables could provide deeper insights of demographic make-up; for example, low income is closely correlated with percentage of people living below the poverty line both of which may have certain correlation with race demographics. That being said, there may still be some additional insights such as racial tensions that can be drawn, so we would likely include the racial breakdown of an MSA in the model. As for granularity in our data, we realized that the majority rows had missing values for ‘Asian’ and ‘Some Other Race’ columns were missing, so we might drop these variables. We also have few rows with missing values for the ‘Black or African American’ variable, but we will substitute those with the imputed mean.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;RACE AND HISPANIC OR LATINO ORIGIN&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">races</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">race</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">race_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">race</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># Total number of murders vs. Racial Breakdown</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">race_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
        <span class="c"># Murders per 100,000 vs. Racial Breakdown</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">race_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Racial Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Racial Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 6</strong>
<img src="EDA_files/EDA_26_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-ethnicity">2.2.6 EDA with respect to Ethnicity</h4>
<p>Figure 7 also produce interesting but possibly misleading results as well. It is clear there is a positive correlation between the Hispanic or Latino percentage of the population and the murder rate. The correlation looks to be steeper than the trend observed in the previous visualizations. However, again, correlation does not imply causation. We will have to consider similar methods as with other race demographics.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">ethnicity</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Hispanic or Latino&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ethnic_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">ethnicity</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">ethnic_series</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs. Ethnic Breakdown</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">ethnic_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of Murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median Hispanic/Latino Population Percentage&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Hispanic/Latino Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Ethnic Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Murders per 100,000 vs. Ethnic Breakdown</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">ethnic_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median Hispanic/Latino Population Percentage&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Hispanic/Latino Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Ethnic Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 7</strong></p>
<p><img src="EDA_files/EDA_29_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-educational-attainment">2.2.7 EDA with respect to educational attainment</h4>
<p>Figure 8 is a different visualization technique to help with this EDA. The bar graph indicates some interesting results: there is a slight negative correlation between level of education and the murder rate. The higher the proportion of population with less than high school graduations, the higher the murder rate. This is also true for the higher the rate of population with high school education, though it appears these trends counteract each other (when high school grad rates are high, the opposite rate is low, but there is still a higher murder count). Education does seem to be a very interesting variable, and the Census data provide us with the composition of education attainment in five categories: less than high school graduate, high school graduate and equivalence, some college or associate’s degree, bachelor’s degree, and graduate or professional degree. To address issues of multicollinearity, we decided to sum some college or higher attainment of education in our model.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">educations</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;EDUCATIONAL ATTAINMENT&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">educations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">education</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">educations</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]):</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">education</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">ed_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">education</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># Murders per 100,000 vs. Education Breakdown</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">ed_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">prev_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">educations</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">ed_series</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">prev_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prev_series_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">educations</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">prev_series_2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">educations</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">ed_series</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">prev_series_1</span> <span class="o">+</span> <span class="n">prev_series_2</span><span class="p">,</span>
                      <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">less_than_hs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">educations</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">less_than_hs</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span>
                         <span class="n">less_than_hs</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median Percent of the Population with less than high school&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Population Percentage with less than a high school education&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Education Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Education Levels&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Education Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 8</strong>
<img src="EDA_files/EDA_32_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-marital-status">2.2.8 EDA with respect to Marital status</h4>
<p>We suspected to see a higher correlation with this variable, but Figure 9 doesn’t show any insights of any relationship to the dependent variable. Perhaps a very slight positive correlation with single/separated and a very slight negative correlation with married.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">marriage</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;MARITAL STATUS&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">marriage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">marriage</span><span class="p">:</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">marriage_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">status</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># Total number of murders vs. Marriage Breakdown</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">marriage_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
        <span class="c"># Murders per 100,000 vs. Marriage Breakdown</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">marriage_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Marriage Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Population Percentage&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Marriage Breakdown per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 9</strong>
<img src="EDA_files/EDA_35_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-us-citizen-population-">2.2.9 EDA with respect to U.S. Citizen Population %</h4>
<p>Figure 10 shows that percentage of U.S. Citizens in each MSA has a very slightly positive or almost no correlation with murder rate. Therefore, we will also look into a similar variable: the non-native variable, which we will impute by taking the total number of foreign-born population by the total population of each MSA.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">citizen</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Citizenship&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">citizen_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">citizen</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">citizen_series</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs. Percentage of US citizens</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">citizen_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that has US citizenship&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Percentage of U.S. Citizenship %&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Citizenship Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 vs P Percentage of US citizens</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">citizen_series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that has US citizenship&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Percentage of U.S. Citizenship %&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Citizenship Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 10</strong></p>
<p><img src="EDA_files/EDA_38_0.png" alt="png" /></p>
<h4 id="eda-with-respect-to-foreign-born-population-">2.2.10 EDA with respect to Foreign Born Population %</h4>
<p>Similar to citizenship, Figure 11 shows that non-native demographic of an area has a slightly positive or almost no correlation between citizenship and murder rate. More importantly, non-native demographic seems to be also skewed to the right, suggesting that there are certain MSA areas with higher foreign proportion than other MSA’s.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">non_native_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;non_native&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pop_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Total; Estimate; Total population&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">foreign_series</span> <span class="o">=</span> <span class="n">non_native_series</span> <span class="o">/</span> <span class="n">pop_series</span>
    <span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">foreign_series</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c"># Total number of murders vs. Percentage of foreign population (born outside US)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">],</span> <span class="n">foreign_series</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Number of murders&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that is foreign born&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Number of Murders per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Population that is foreign born&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Number of Murders vs. Foreign Population Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
    <span class="c"># Number of murders per 100,000 vs P Percentage of foreign population (born outside US)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Murders_per_100000&#39;</span><span class="p">],</span> <span class="n">foreign_series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Murders per 100,000 people&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Median percentage of population that is foreign born&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Murders per 100,000 people per MSA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Percentage of MSA Population that is foreign born&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">6</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;{} Murders per 100,000 vs. Foreign Population Percentage per MSA&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span></code></pre></div>
<p><strong>Figure 11</strong></p>
<p><img src="EDA_files/EDA_40_0.png" alt="png" /></p>
<h3 id="examine-correlation-matrix-of-these-variables">2.3 Examine Correlation Matrix of these Variables</h3>
<p>Having seen the relationship between the selected independent variables with our two dependent variables of crime count and per capita rate, we wanted to further gain insights of the relationships between the independent variable. Although we deemed in the beginning that time series might not have a strong correlation with crime, we were interested in how time series could affect other independent variables. Therefore, we decided to look at a correlation matrix between these columns over the 11 years from 2006 to 2016. We observed very interesting correlations between the independent variables with which we are considering using interaction variables with polynomial features, to see how interactive variables of poverty and education or of income and racial demographics could bring insight into crime rates.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">df_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">male</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Male&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">median_age</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Median age&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">median_income</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Median income&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">black</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Black or&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">white</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;White&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">poverty</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;poverty&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">uneducated</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;EDUCATIONAL ATTAINMENT&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">highschool</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;EDUCATIONAL ATTAINMENT&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">college</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;EDUCATIONAL ATTAINMENT&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">citizen</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s">&#39;Citizenship&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">v</span><span class="p">[</span><span class="s">&quot;Year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2000</span> <span class="o">+</span> <span class="n">k</span>
    <span class="n">non_native_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;non_native&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pop_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;Total; Estimate; Total population&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Murder_and_nonnegligent_manslaughter&#39;</span><span class="p">,</span> <span class="s">&#39;Murders_per_100000&#39;</span><span class="p">,</span> <span class="s">&#39;Year&#39;</span><span class="p">,</span> <span class="n">poverty</span><span class="p">,</span> <span class="n">male</span><span class="p">,</span>
            <span class="n">median_age</span><span class="p">,</span> <span class="n">median_income</span><span class="p">,</span> <span class="n">black</span><span class="p">,</span> <span class="n">white</span><span class="p">,</span> <span class="n">uneducated</span><span class="p">,</span> <span class="n">highschool</span><span class="p">,</span> <span class="n">citizen</span><span class="p">]</span>
    <span class="n">df_temp</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
    <span class="n">df_temp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;murder_count&#39;</span><span class="p">,</span> <span class="s">&#39;muder_per_100000&#39;</span><span class="p">,</span> <span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="s">&#39;poverty&#39;</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span><span class="s">&#39;median_age&#39;</span><span class="p">,</span>
                       <span class="s">&#39;median_income&#39;</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;uneducated&#39;</span><span class="p">,</span> <span class="s">&#39;highschool&#39;</span><span class="p">,</span> <span class="s">&#39;citizen&#39;</span><span class="p">]</span>
    <span class="n">df_temp</span><span class="p">[</span><span class="s">&#39;college&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">college</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">df_temp</span><span class="p">[</span><span class="s">&#39;foreign&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">foreign_series</span>
    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_temp</span><span class="p">)</span>
<span class="n">df_concat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df_concat</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">df_concat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df_concat</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></code></pre></div>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">df_concat</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span></code></pre></div>
<p><strong>Figure 12</strong>
<img src="EDA_files/EDA_45_1.png" alt="png" /></p>
<h3 id="additional-questions">2.4 Additional Questions</h3>
<p>Are there any other variables we can investigate? Perhaps government expenditures in certain areas, police presence, political breakdowns. I am definitely interested in looking into more datasets if possible. Level of poverty looks fairly strongly correlated with the murder rate, what of the MSA’s with high poverty but low murder?</p>
  </div>
</article>
        </section>
<div class="clearfix"></div>
<footer class="site-footer txt-center">
  <hr>
  <ul class="social">
  </ul>
  <small>&copy; 2017 All rights reserved. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> and <i class="icon icon-heart"></i></small>
  <small>by <a href="http://nandomoreira.me" target="_blank">nandomoreira.me</a></small>
</footer>
    </main>
    <a href="" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#2ecc71; color:#f7f8f9; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
  </body>
</html>
